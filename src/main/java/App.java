import java.io.IOException;

/*
 * This Java source file was generated by the Gradle 'init' task.
 */
public class App {

    public static void main(String[] args) {

        // TODO add file extension as an option, i.e. -e "txt"

        if (args.length >0 && (args[0].equals("help") || args[0].equals("--help") || args[0].equals("--h") || args[0].equals("-h") )) {
            printHelp();
        }

        else if (args.length == 4){

            printInput(args);
            String pattern = args[1];
            String pathToWatch = args[3];

            try {
                new FileWatcher(pathToWatch, pattern);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        else {
            System.err.println("ERROR: Incorrect usage");
            printHelp();
        }
    }

    private static void printHelp(){
        System.out.println("\nUSAGE:");
        System.out.println("\tjava -jar logHecate.jar -p \"PATTERN_TO_MATCH\" -d \"path/to/file\"");
        System.out.println("\nUNIX example:\n" +
                "\tjava -jar logHecate.java -p \"err\" -d \"/Users/admin/some/software/logs\"\n" +
                "Windows example:  \n" +
                "\tjava -jar logHecate.java -p \"err\" -d \"C://some//software//logs\"");
    }

    private static void printInput(String[] parameters){
        System.out.printf("Pattern to search for: '%s'\n", parameters[1]);
        System.out.printf("Watching directory: %s\n", parameters[3]);
    }
}
